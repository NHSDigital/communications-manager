{
   "collection" : {
      "event" : [
         {
            "listen" : "prerequest",
            "script" : {
               "exec" : [
                  "var uuid = require('uuid');",
                  "",
                  "//assign the message batch reference",
                  "pm.variables.set(\"message_batch_reference\", uuid.v4());",
                  "",
                  "//assign the correlation id",
                  "pm.variables.set(\"correlation_id\", uuid.v4());"
               ],
               "id" : "86958eae-29b0-4e27-9885-f0dd2826d8b3",
               "type" : "text/javascript"
            }
         },
         {
            "listen" : "test",
            "script" : {
               "exec" : [
                  ""
               ],
               "id" : "b22a6144-02f0-45c3-8bd8-ce9817716983",
               "type" : "text/javascript"
            }
         }
      ],
      "info" : {
         "_postman_id" : "ec078d1e-d4d7-4460-92b9-7d79d51f967a",
         "description" : "This collection allows you to run a number of pre-generated requests to simulate responses from our sandbox environment.\n\nThis environment requires no authentication and no upfront setup for you to use.\n\nFor more information on the Communications Manager API please refer to [the documentation](https://digital.nhs.uk/developer/api-catalogue/communications-manager).",
         "name" : "Communications Manager - Sandbox",
         "schema" : "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
         "uid" : "28740466-ec078d1e-d4d7-4460-92b9-7d79d51f967a",
         "updatedAt" : "2023-12-01T15:44:41.000Z"
      },
      "item" : [
         {
            "description" : "This folder contains requests that allow you to simulate all of the different responses when sending a batch of messages.",
            "id" : "b3c441c6-e9f0-4fcb-9942-0aa0bd2dcb59",
            "item" : [
               {
                  "description" : "This folder contains example requests that trigger validation errors when attempting to send a batch of messages.",
                  "id" : "31984c30-7e35-40a9-ba73-07398fdc144b",
                  "item" : [
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "d453eb68-9bf0-4253-8cf2-18b498a3cea6",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 400\", () => {\r",
                                    "    pm.response.to.have.status(400);\r",
                                    "});"
                                 ],
                                 "id" : "8d8c16d8-0ca1-4f75-9e7c-f6fd06d9ab35",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "3a084e64-b53d-4945-ab53-a9e2f0339d3f",
                        "name" : "400 -  Too Few Items",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"MessageBatch\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{routing_plan_id}}\",\r\n                \"messageBatchReference\": \"{{message_batch_reference}}\",\r\n                \"messages\": [\r\n\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This responses sends 0 message objects in the messages collection triggering the too few items error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-3a084e64-b53d-4945-ab53-a9e2f0339d3f"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "241f1f32-b5a8-46f6-9f75-f9fe6e10ff4e",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 400\", () => {\r",
                                    "    pm.response.to.have.status(400);\r",
                                    "});"
                                 ],
                                 "id" : "edb63950-0f98-45f4-8dd8-ea7bd04353f3",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "05b62d8c-fcaf-49e3-89aa-8bb5c4c22e40",
                        "name" : "400 - Duplicate Items",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"MessageBatch\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{routing_plan_id}}\",\r\n                \"messageBatchReference\": \"{{message_batch_reference}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    },\r\n                                        {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request sends two message objects with the same `messageReference` value. This triggers a duplicate items error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-05b62d8c-fcaf-49e3-89aa-8bb5c4c22e40"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "426e4cd6-2346-4a65-93de-8277ffc89100",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 400\", () => {\r",
                                    "    pm.response.to.have.status(400);\r",
                                    "});"
                                 ],
                                 "id" : "f17e02bb-4c91-4478-8110-d9599cdb8feb",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "132429ad-c931-411e-ae10-9d50e3bbf071",
                        "name" : "400 - Null Value",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": null,\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{routing_plan_id}}\",\r\n                \"messageBatchReference\": \"{{message_batch_reference}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": null,\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request sends a null `type` and a null `recipient` on the request, triggering the null value error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-132429ad-c931-411e-ae10-9d50e3bbf071"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "733b3b9d-c646-4b6d-a4b1-eb663aa66e98",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 400\", () => {\r",
                                    "    pm.response.to.have.status(400);\r",
                                    "});"
                                 ],
                                 "id" : "222e1130-fa8d-49cb-a6e1-2269fc0f2770",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "cb3c4a7d-90aa-4d00-ace1-5a5cd91814bd",
                        "name" : "400 - Invalid Value",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"invalid\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"invalid\",\r\n                \"messageBatchReference\": \"invalid\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"invalid\",\r\n                        \"recipient\": \"invalid\",\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request sends several invalid values on properties. Each of these triggers its own invalid value error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-cb3c4a7d-90aa-4d00-ace1-5a5cd91814bd"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "4272a35a-a466-4414-8da5-ba75f44ec10a",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 400\", () => {\r",
                                    "    pm.response.to.have.status(400);\r",
                                    "});"
                                 ],
                                 "id" : "59de3ca5-5ab1-4f1a-8f49-8181070575a2",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "d7461f29-a3db-4609-817a-478290172b33",
                        "name" : "400 - Missing Property",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{routing_plan_id}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request misses the `type` and the `messageBatchReference` properties. This triggers the missing property error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-d7461f29-a3db-4609-817a-478290172b33"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "49141694-c60f-416d-b423-cb4af15c4a13",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 400\", () => {\r",
                                    "    pm.response.to.have.status(400);\r",
                                    "});"
                                 ],
                                 "id" : "b75e8b89-ec19-485c-97a2-63505cfa6bc8",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "078a88ca-8f29-4ebb-9bad-ea3e716ce497",
                        "name" : "400 - Invalid Value - Body",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "}{@SA}{}SAD"
                           },
                           "description" : "This request sends through an invalid JSON body payload, which triggers the invalid value error at the body level.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-078a88ca-8f29-4ebb-9bad-ea3e716ce497"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "c03f7c6e-7f29-4f18-b70e-a9435a74e5c6",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 404\", () => {\r",
                                    "    pm.response.to.have.status(404);\r",
                                    "});"
                                 ],
                                 "id" : "fdc23909-5778-4d89-b301-1690e1fe3018",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "464c20a7-fc40-43fa-9a86-5c965b4e9912",
                        "name" : "404 - Invalid Routing Plan Id",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"MessageBatch\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"c118b13c-f98c-4def-93f0-515d4e4f4ee1\",\r\n                \"messageBatchReference\": \"{{message_batch_reference}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request sends an invalid routing plan id. As the system cannot find this routing plan it triggers a 404 error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "path" : [
                                 "v1",
                                 "message-batches"
                              ],
                              "raw" : "{{base_url}}/v1/message-batches"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-464c20a7-fc40-43fa-9a86-5c965b4e9912"
                     }
                  ],
                  "name" : "Validation Errors",
                  "uid" : "28740466-31984c30-7e35-40a9-ba73-07398fdc144b"
               },
               {
                  "event" : [
                     {
                        "listen" : "prerequest",
                        "script" : {
                           "exec" : [
                              ""
                           ],
                           "id" : "832ce22d-e604-4477-8b49-6add91920812",
                           "type" : "text/javascript"
                        }
                     },
                     {
                        "listen" : "test",
                        "script" : {
                           "exec" : [
                              "pm.test(\"Correlation identifier is returned\", () => {\r",
                              "    pm.response.to.have.header(\"x-correlation-id\");\r",
                              "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                              "});\r",
                              "\r",
                              "pm.test(\"Status code is 201\", () => {\r",
                              "    pm.response.to.have.status(201);\r",
                              "});"
                           ],
                           "id" : "59dadc53-94c6-4329-8f96-668bd304968b",
                           "type" : "text/javascript"
                        }
                     }
                  ],
                  "id" : "c731e648-18c6-4a09-94e7-2eac675f0462",
                  "name" : "201 - Message Batch Created",
                  "protocolProfileBehavior" : {
                     "disableBodyPruning" : true,
                     "disabledSystemHeaders" : {
                        "accept" : true
                     }
                  },
                  "request" : {
                     "body" : {
                        "mode" : "raw",
                        "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"MessageBatch\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{routing_plan_id}}\",\r\n                \"messageBatchReference\": \"{{message_batch_reference}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                     },
                     "description" : "This request successfully creates a message batch.",
                     "header" : [
                        {
                           "key" : "Content-Type",
                           "type" : "default",
                           "value" : "application/vnd.api+json"
                        },
                        {
                           "key" : "Accept",
                           "type" : "default",
                           "value" : "application/vnd.api+json"
                        },
                        {
                           "key" : "X-Correlation-Id",
                           "type" : "text",
                           "value" : "{{correlation_id}}"
                        }
                     ],
                     "method" : "POST",
                     "url" : {
                        "host" : [
                           "{{base_url}}"
                        ],
                        "path" : [
                           "v1",
                           "message-batches"
                        ],
                        "raw" : "{{base_url}}/v1/message-batches"
                     }
                  },
                  "response" : [],
                  "uid" : "28740466-c731e648-18c6-4a09-94e7-2eac675f0462"
               }
            ],
            "name" : "Send Messages",
            "uid" : "28740466-b3c441c6-e9f0-4fcb-9942-0aa0bd2dcb59"
         },
         {
            "description" : "This folder contains all requests related to errors that the API can throw on any endpoint.",
            "id" : "aa0bdea6-c7ea-4a53-91cd-868d33c55665",
            "item" : [
               {
                  "description" : "This collection of requests shows how to trigger timeout and quota errors.",
                  "id" : "c55d6733-c440-4f3b-b91f-f067db120f10",
                  "item" : [
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "b2a1952b-8f20-4cce-8450-2b45fea5db7c",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 408\", () => {\r",
                                    "    pm.response.to.have.status(408);\r",
                                    "});\r",
                                    ""
                                 ],
                                 "id" : "2fa5cb31-825c-468c-8cbd-fdd612f03cad",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "14041c09-de3b-4e42-a611-2e2a9bc97c30",
                        "name" : "408 - Request Timeout",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "description" : "This request simulates the request timeout error response from the API.",
                           "header" : [
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              },
                              {
                                 "key" : "Prefer",
                                 "type" : "default",
                                 "value" : "code=408"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-14041c09-de3b-4e42-a611-2e2a9bc97c30"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "fc864668-06d1-4a6d-81b8-4ae6904863b0",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 429\", () => {\r",
                                    "    pm.response.to.have.status(429);\r",
                                    "});\r",
                                    ""
                                 ],
                                 "id" : "c07d80c8-271c-4da6-a651-2ef6e87167f9",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "e3e10bf1-08bd-4421-ab57-e54a0b2c303b",
                        "name" : "429 - Too Many Requests",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "description" : "This request simulates the too many requests error response from the API.",
                           "header" : [
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              },
                              {
                                 "key" : "Prefer",
                                 "type" : "default",
                                 "value" : "code=429"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-e3e10bf1-08bd-4421-ab57-e54a0b2c303b"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "241c78c7-df65-4088-9a31-97cc67e7680d",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 504\", () => {\r",
                                    "    pm.response.to.have.status(504);\r",
                                    "});"
                                 ],
                                 "id" : "1c3109bd-a0fc-4a48-9d6d-d96b58683c66",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "a67f0972-d8d3-46f5-8ece-67a78604ec29",
                        "name" : "504 - Gateway Timeout",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true,
                           "disabledSystemHeaders" : {
                              "accept" : true
                           }
                        },
                        "request" : {
                           "description" : "This request simulates the gateway timeout error response from the API.",
                           "header" : [
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              },
                              {
                                 "key" : "Prefer",
                                 "type" : "default",
                                 "value" : "code=504"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-a67f0972-d8d3-46f5-8ece-67a78604ec29"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 425\", () => {\r",
                                    "    pm.response.to.have.status(425);\r",
                                    "});"
                                 ],
                                 "id" : "b26e06af-9979-4778-909f-3ab124923976",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "461a9372-4d0f-4579-b4e5-52cddd837226",
                        "name" : "425 - Retry Too Early",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : ""
                           },
                           "description" : "This request simulates the retry too early error response from the API.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "text",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "text",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              },
                              {
                                 "key" : "Prefer",
                                 "type" : "text",
                                 "value" : "code=425"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-461a9372-4d0f-4579-b4e5-52cddd837226"
                     }
                  ],
                  "name" : "Timeouts & Quotas",
                  "uid" : "28740466-c55d6733-c440-4f3b-b91f-f067db120f10"
               },
               {
                  "description" : "This collection of requests shows how to trigger authentication and authorization errors.",
                  "id" : "6050edef-dd8c-4779-adfa-4b40d3792351",
                  "item" : [
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "39d06876-bbfe-419a-a9eb-9379131c61df",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 401\", () => {\r",
                                    "    pm.response.to.have.status(401);\r",
                                    "});\r",
                                    ""
                                 ],
                                 "id" : "ef0409b5-b4b6-4593-bede-437d0b4e712e",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "7aa1ae45-3228-4ec1-a0fc-625d0039d9bc",
                        "name" : "401 - Unauthorized",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "description" : "This request simulates the unauthorized error response from the API.",
                           "header" : [
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              },
                              {
                                 "key" : "Prefer",
                                 "type" : "text",
                                 "value" : "code=401"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-7aa1ae45-3228-4ec1-a0fc-625d0039d9bc"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "02b6eeb4-3000-4358-87b5-1ea7ce51583f",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 403\", () => {\r",
                                    "    pm.response.to.have.status(403);\r",
                                    "});\r",
                                    ""
                                 ],
                                 "id" : "78a90b4d-eabd-4af9-8902-9b0767549e53",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "788de9e3-8da8-4464-a8e0-b1db8f5afcae",
                        "name" : "403 - Forbidden",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "description" : "This request simulates the forbidden error response from the API.",
                           "header" : [
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "default",
                                 "value" : "{{correlation_id}}"
                              },
                              {
                                 "key" : "Prefer",
                                 "type" : "default",
                                 "value" : "code=403"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-788de9e3-8da8-4464-a8e0-b1db8f5afcae"
                     }
                  ],
                  "name" : "Authentication errors",
                  "uid" : "28740466-6050edef-dd8c-4779-adfa-4b40d3792351"
               },
               {
                  "description" : "This collection of requests shows how to trigger mime type errors.",
                  "id" : "2ce97bcd-cc6d-41d0-b4e0-994dd870f68a",
                  "item" : [
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "9b147eb2-c9e0-4993-8acc-dd7b860cdccb",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 406\", () => {\r",
                                    "    pm.response.to.have.status(406);\r",
                                    "});"
                                 ],
                                 "id" : "404b94d4-88e9-4a93-a3b1-944735875c98",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "fb864a40-ca2d-4348-8a90-aaa3cf16fade",
                        "name" : "406 - Not Acceptable",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"MessageBatch\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{base_url}}\",\r\n                \"messageBatchReference\": \"{{messageBatchReference}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request asks the server to generate a response that it cannot, triggering a not acceptable error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "not/valid"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "GET",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-fb864a40-ca2d-4348-8a90-aaa3cf16fade"
                     },
                     {
                        "event" : [
                           {
                              "listen" : "prerequest",
                              "script" : {
                                 "exec" : [
                                    ""
                                 ],
                                 "id" : "337db534-bab8-4b47-860c-325e069837d2",
                                 "type" : "text/javascript"
                              }
                           },
                           {
                              "listen" : "test",
                              "script" : {
                                 "exec" : [
                                    "pm.test(\"Correlation identifier is returned\", () => {\r",
                                    "    pm.response.to.have.header(\"x-correlation-id\");\r",
                                    "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                                    "});\r",
                                    "\r",
                                    "pm.test(\"Status code is 415\", () => {\r",
                                    "    pm.response.to.have.status(415);\r",
                                    "});"
                                 ],
                                 "id" : "46b6fb22-b3d3-4ff2-92cc-3dd976c2804a",
                                 "type" : "text/javascript"
                              }
                           }
                        ],
                        "id" : "89b29b95-7358-43e8-b491-bbf1f48b7895",
                        "name" : "415 - Unsupported Media",
                        "protocolProfileBehavior" : {
                           "disableBodyPruning" : true
                        },
                        "request" : {
                           "body" : {
                              "mode" : "raw",
                              "options" : {
                                 "raw" : {
                                    "language" : "json"
                                 }
                              },
                              "raw" : "{\r\n        \"data\": {\r\n            \"type\": \"MessageBatch\",\r\n            \"attributes\": {\r\n                \"routingPlanId\": \"{{routing_plan_id}}\",\r\n                \"messageBatchReference\": \"{{messageBatchReference}}\",\r\n                \"messages\": [\r\n                    {\r\n                        \"messageReference\": \"703b8008-545d-4a04-bb90-1f2946ce1575\",\r\n                        \"recipient\": {\r\n                            \"nhsNumber\": \"9990548609\",\r\n                            \"dateOfBirth\": \"1932-01-06\"\r\n                        },\r\n                        \"personalisation\": {}\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n}"
                           },
                           "description" : "This request attempts to send data in an unknown format, triggering an unsupported media error.",
                           "header" : [
                              {
                                 "key" : "Content-Type",
                                 "type" : "default",
                                 "value" : "not/valid"
                              },
                              {
                                 "key" : "Accept",
                                 "type" : "default",
                                 "value" : "application/vnd.api+json"
                              },
                              {
                                 "key" : "X-Correlation-Id",
                                 "type" : "text",
                                 "value" : "{{correlation_id}}"
                              }
                           ],
                           "method" : "POST",
                           "url" : {
                              "host" : [
                                 "{{base_url}}"
                              ],
                              "raw" : "{{base_url}}"
                           }
                        },
                        "response" : [],
                        "uid" : "28740466-89b29b95-7358-43e8-b491-bbf1f48b7895"
                     }
                  ],
                  "name" : "Mime type errors",
                  "uid" : "28740466-2ce97bcd-cc6d-41d0-b4e0-994dd870f68a"
               }
            ],
            "name" : "Errors",
            "uid" : "28740466-aa0bdea6-c7ea-4a53-91cd-868d33c55665"
         },
         {
            "event" : [
               {
                  "listen" : "prerequest",
                  "script" : {
                     "exec" : [
                        ""
                     ],
                     "id" : "ebd214ce-fa6f-494c-9e42-a26cc6943794",
                     "type" : "text/javascript"
                  }
               },
               {
                  "listen" : "test",
                  "script" : {
                     "exec" : [
                        "pm.test(\"Correlation identifier is returned\", () => {\r",
                        "    pm.response.to.have.header(\"x-correlation-id\");\r",
                        "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                        "});\r",
                        "\r",
                        "pm.test(\"Status code is 200\", () => {\r",
                        "    pm.response.to.have.status(200);\r",
                        "});\r",
                        "\r",
                        "pm.test(\"Response Header Contains Access-Control-Request-Method Provided\", () => {\r",
                        "    pm.expect(pm.response.headers.get('Access-Control-Request-Method')).to.eql(pm.request.headers.get('Access-Control-Request-Method'));\r",
                        "});\r",
                        "\r",
                        "pm.test(\"Response Header Contains Origin Provided\", () => {\r",
                        "    pm.expect(pm.response.headers.get('Origin')).to.eql(\"https://my.website\");\r",
                        "});\r",
                        "\r",
                        "pm.test(\"Response Header Contains Origin Provided\", () => {\r",
                        "    pm.expect(pm.response.headers.get('Origin')).to.eql(\"https://my.website\");\r",
                        "});"
                     ],
                     "id" : "d0c1d7c2-7027-4051-a888-50b5345c3324",
                     "type" : "text/javascript"
                  }
               }
            ],
            "id" : "923ebe93-2151-4292-8913-ee5417d3509d",
            "name" : "200 - CORS",
            "protocolProfileBehavior" : {
               "disableBodyPruning" : true
            },
            "request" : {
               "description" : "A request showing the CORS header responses.",
               "header" : [
                  {
                     "key" : "Accept",
                     "type" : "default",
                     "value" : "application/vnd.api+json"
                  },
                  {
                     "key" : "Origin",
                     "type" : "default",
                     "value" : "https://my.website"
                  },
                  {
                     "key" : "Access-Control-Request-Method",
                     "type" : "default",
                     "value" : "POST"
                  },
                  {
                     "key" : "X-Correlation-Id",
                     "type" : "text",
                     "value" : "{{correlation_id}}"
                  }
               ],
               "method" : "OPTIONS",
               "url" : {
                  "host" : [
                     "{{base_url}}"
                  ],
                  "raw" : "{{base_url}}"
               }
            },
            "response" : [],
            "uid" : "28740466-923ebe93-2151-4292-8913-ee5417d3509d"
         },
         {
            "event" : [
               {
                  "listen" : "prerequest",
                  "script" : {
                     "exec" : [
                        ""
                     ],
                     "id" : "ed4d085f-935d-48db-b829-59b06c1e6aa5",
                     "type" : "text/javascript"
                  }
               },
               {
                  "listen" : "test",
                  "script" : {
                     "exec" : [
                        "pm.test(\"Correlation identifier is returned\", () => {\r",
                        "    pm.response.to.have.header(\"x-correlation-id\");\r",
                        "    pm.response.to.be.header(\"x-correlation-id\", pm.variables.get(\"correlation_id\"));\r",
                        "});\r",
                        "\r",
                        "pm.test(\"Status code is 404\", () => {\r",
                        "    pm.response.to.have.status(404);\r",
                        "});"
                     ],
                     "id" : "45009cd8-ae03-4327-95d7-728a089909b1",
                     "type" : "text/javascript"
                  }
               }
            ],
            "id" : "8851be31-fcdf-4faa-9ad7-cf7e549ba4b4",
            "name" : "404 - Not Found - Invalid URL",
            "protocolProfileBehavior" : {
               "disableBodyPruning" : true
            },
            "request" : {
               "description" : "This request triggers a 404 not found error.",
               "header" : [
                  {
                     "key" : "Accept",
                     "type" : "default",
                     "value" : "application/vnd.api+json"
                  },
                  {
                     "key" : "X-Correlation-Id",
                     "type" : "text",
                     "value" : "{{correlation_id}}"
                  }
               ],
               "method" : "GET",
               "url" : {
                  "host" : [
                     "{{base_url}}"
                  ],
                  "path" : [
                     "does",
                     "not",
                     "exist"
                  ],
                  "raw" : "{{base_url}}/does/not/exist"
               }
            },
            "response" : [],
            "uid" : "28740466-8851be31-fcdf-4faa-9ad7-cf7e549ba4b4"
         }
      ],
      "variable" : [
         {
            "key" : "base_url",
            "type" : "string",
            "value" : "https://sandbox.api.service.nhs.uk/comms"
         },
         {
            "key" : "routing_plan_id",
            "type" : "string",
            "value" : "b838b13c-f98c-4def-93f0-515d4e4f4ee1"
         }
      ]
   }
}
